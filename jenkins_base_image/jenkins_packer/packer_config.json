{
  "builders": [
    {
      "name": "thegaijin-jenkins-k8s",
      "type": "googlecompute",
      "project_id": "andela-learning",
      "machine_type": "n1-standard-1",
      "region": "us-east1",
      "zone": "us-east1-b",
      "account_file":
        "/Users/svictor/DevOps/gcp/andela-learning-22734c57a9a3.json",
      "ssh_username": "ubuntu",
      "image_description": "Jenkins kubernetes image",
      "image_family": "ubuntu-1604-lts",
      "source_image": "ubuntu-1604-xenial-v20170202",
      "image_name": "thegaijin-jenk8ns",
      "disk_size": 10
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "inline": [
        "sudo apt-get update",
        "sudo apt-get install -y ansible",
        "sudo apt-get install -y default-jdk",
        "curl https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.tar.gz > /tmp/google-cloud-sdk.tar.gz",
        "sudo mkdir -p /usr/local/gcloud",
        "sudo tar -C /usr/local/gcloud -xvf /tmp/google-cloud-sdk.tar.gz",
        "sudo CLOUDSDK_CORE_DISABLE_PROMPTS=1 /usr/local/gcloud/google-cloud-sdk/install.sh",
        "sudo gcloud components install beta --quiet"
      ]
    },
    {
      "type": "ansible-local",
      "playbook_file": "./ansible_playbook.yml"
    }
  ]
}
